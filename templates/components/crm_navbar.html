<div class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-14">
            <!-- Left: Navigation Links -->
            <div class="flex items-center space-x-6">
                <a href="{% url 'crm:crm_home' %}" 
                   class="text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors">
                    CRM
                </a>
                
                <a href="#" 
                   class="text-sm font-medium text-gray-400 dark:text-gray-500 cursor-not-allowed">
                    Sales
                </a>
                
                <a href="#" 
                   class="text-sm font-medium text-gray-400 dark:text-gray-500 cursor-not-allowed">
                    Reporting
                </a>
                
                <div class="relative" x-data="{ open: false }">
                    <button @click="open = !open" 
                            class="flex items-center space-x-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors">
                        <span>Configuração</span>
                        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    
                    <div x-show="open" 
                         @click.away="open = false"
                         x-transition:enter="transition ease-out duration-100"
                         x-transition:enter-start="opacity-0 scale-95"
                         x-transition:enter-end="opacity-100 scale-100"
                         x-transition:leave="transition ease-in duration-75"
                         x-transition:leave-start="opacity-100 scale-100"
                         x-transition:leave-end="opacity-0 scale-95"
                         class="absolute right-0 sm:left-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"
                         style="display: none;">
                        <div class="py-1">
                            <a href="{% url 'crm:stage_list' %}" 
                               class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                                Etapas
                            </a>
                            <a href="{% url 'crm:crm_tag_list' %}" 
                               class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                                Tags
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Botões de Ação (Form Actions) -->
                {% if show_form_actions %}
                <div class="flex items-center gap-3 ml-2">
                    <!-- Botão Descartar (Vermelho) -->
                    <a href="{% url 'crm:crm_home' %}" 
                       class="flex items-center justify-center hover:opacity-80 transition-opacity" 
                       title="Descartar">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-red-500">
                            <path d="M3 6h18"></path>
                            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            <line x1="10" x2="10" y1="11" y2="17"></line>
                            <line x1="14" x2="14" y1="11" y2="17"></line>
                        </svg>
                    </a>
                    <!-- Botão Guardar (Verde) -->
                    <button type="submit" 
                            form="lead-form"
                            class="flex items-center justify-center hover:opacity-80 transition-opacity" 
                            title="Guardar">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500">
                            <path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path>
                            <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path>
                            <path d="M7 3v4a1 1 0 0 0 1 1h7"></path>
                        </svg>
                    </button>
                </div>
                {% endif %}
            </div>
            
            <!-- Right: Smart Buttons -->
            <div class="flex items-center gap-2">
                <button type="button" class="flex items-center gap-2 px-3 py-1 rounded-md border border-cyan-500 bg-transparent hover:bg-cyan-500/10 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-cyan-400">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                        <line x1="12" y1="18" x2="12" y2="12"></line>
                    </svg>
                    <span class="text-sm font-semibold text-cyan-400">{{ sales_count|default:0 }}</span>
                    <span class="text-xs text-cyan-400">Vendas</span>
                </button>
                
                <button type="button" class="flex items-center gap-2 px-3 py-1 rounded-md border border-green-500 bg-transparent hover:bg-green-500/10 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-green-400">
                        <line x1="12" x2="12" y1="2" y2="22"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                    </svg>
                    <span class="text-sm font-semibold text-green-400">€{{ revenue_total|default:0 }}</span>
                    <span class="text-xs text-green-400">Receita</span>
                </button>
            </div>
        </div>
    </div>
</div>
